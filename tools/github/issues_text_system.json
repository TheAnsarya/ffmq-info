[
	{
		"title": "üìù Complete Control Code Documentation (50% ‚Üí 100%)",
		"body": "## Overview\n\nDocument all remaining control codes in the FFMQ text system to achieve 100% coverage.\n\n## Current Status\n\n- **Documented:** ~25 control codes (50%)\n- **Total:** 48 possible control codes (jump table at $00:9E0E)\n- **Analysis Complete:** ‚úÖ 546KB detailed usage report generated\n\n## High-Priority Control Codes\n\n### CMD:08 (20,715 uses across 52 dialogs)\n- **Most Common Followers:**\n  - CMD:07 (3,622 times)\n  - CMD:03 (3,040 times)\n  - CMD:00 (1,867 times)\n- **Status:** Unknown function\n- **Priority:** üî• **CRITICAL** (most used code)\n\n### CMD:0B (12,507 uses across 53 dialogs)\n- **Most Common Followers:**\n  - CMD:0B (1,292 times) - recursive!\n  - CMD:08 (696 times)\n- **Status:** Unknown function\n- **Priority:** üî• **HIGH**\n\n### CMD:0C (7,925 uses)\n- **Status:** Unknown function\n- **Priority:** ‚ö†Ô∏è **MEDIUM**\n\n### CMD:0D (3,908 uses)\n- **Status:** Unknown function\n- **Priority:** ‚ö†Ô∏è **MEDIUM**\n\n### CMD:0E (4,972 uses)\n- **Status:** Unknown function\n- **Priority:** ‚ö†Ô∏è **MEDIUM**\n\n## Implementation Plan\n\n### Phase 1: Assembly Analysis\n- [ ] Locate command jump table at $00:9E0E in `bank_00_documented.asm`\n- [ ] Follow each handler address\n- [ ] Document handler code for each command\n- [ ] Identify what each handler does\n\n### Phase 2: ROM Testing\n- [ ] Test each control code in-game\n- [ ] Create test dialogs with isolated codes\n- [ ] Observe behavior in emulator\n- [ ] Document visual/functional effects\n\n### Phase 3: Documentation\n- [ ] Update `docs/CONTROL_CODES.md` with findings\n- [ ] Add named tags in `import_complex_text.py`\n- [ ] Update `ffmq_text.py` tag reference\n- [ ] Create control code quick reference table\n\n### Phase 4: Validation\n- [ ] Verify all 48 codes documented\n- [ ] Test re-insertion with new codes\n- [ ] Update TEXT_TOOLKIT_GUIDE.md\n- [ ] Add examples to documentation\n\n## Resources\n\n- **Analysis Report:** `reports/control_codes_analysis.txt` (546KB)\n- **Jump Table:** ROM $00:9E0E (PC 0x009E0E)\n- **Handler Code:** Bank $00 in `src/banks/bank_00.asm`\n- **Test Tool:** `tools/analysis/analyze_control_codes_detailed.py`\n\n## Acceptance Criteria\n\n- ‚úÖ All 48 control codes documented in `docs/CONTROL_CODES.md`\n- ‚úÖ Named tags added for all documented codes\n- ‚úÖ In-game testing confirms behavior\n- ‚úÖ Examples provided for each code\n- ‚úÖ Quick reference table created\n\n## Labels\n\n- `enhancement`\n- `documentation`\n- `text-system`\n- `high-priority`\n\n## Milestone\n\nText System v1.0 - Complete Translation Support",
		"labels": ["enhancement", "documentation", "text-system", "high-priority"]
	},
	{
		"title": "‚úÖ Implement Round-Trip Validation Testing for Text System",
		"body": "## Overview\n\nCreate comprehensive round-trip validation to ensure text extraction ‚Üí modification ‚Üí re-insertion works correctly without data corruption.\n\n## Problem\n\nWhile `import_complex_text.py` has been implemented with full dictionary compression support, it has not been validated through complete round-trip testing.\n\n## Implementation Plan\n\n### Phase 1: Test Harness Creation\n- [ ] Create `tools/testing/test_text_roundtrip.py`\n- [ ] Extract all dialogs\n- [ ] Re-insert without modification\n- [ ] Compare ROM bytes (should be identical)\n\n### Phase 2: Simple Text Validation\n- [ ] Test all 595 simple text entries\n- [ ] Verify null termination preserved\n- [ ] Check size constraints\n- [ ] Validate character encoding\n\n### Phase 3: Complex Text Validation\n- [ ] Test all 117 dialogs\n- [ ] Verify dictionary compression works\n- [ ] Check recursive expansion (up to depth 10)\n- [ ] Validate control code preservation\n- [ ] Test size validation warnings\n\n### Phase 4: Modification Testing\n- [ ] Test same-size edits (in-place replacement)\n- [ ] Test smaller edits (verify null-fill with 0xFF)\n- [ ] Test larger edits (verify error handling)\n- [ ] Test special characters (accented, punctuation)\n- [ ] Test control codes ([END], {newline}, [WAIT], etc.)\n\n### Phase 5: Dictionary Compression Testing\n- [ ] Verify dictionary entries (0x30-0x7F) compress correctly\n- [ ] Test common words: \"the \", \"you\", \"Crystal\", etc.\n- [ ] Verify recursive compression works\n- [ ] Test depth limit (should warn at 10 levels)\n- [ ] Validate space savings calculation\n\n### Phase 6: Edge Cases\n- [ ] Test maximum dialog size (boundary testing)\n- [ ] Test empty dialogs\n- [ ] Test dialogs with only control codes\n- [ ] Test all 16 fixed characters (punctuation + accented)\n- [ ] Test unknown characters (should preserve bytes)\n\n### Phase 7: Integration\n- [ ] Add to `tools/testing/run_all_tests.py`\n- [ ] Create CI/CD workflow\n- [ ] Add to `ffmq_text.py validate` command\n- [ ] Document in TEXT_TOOLKIT_GUIDE.md\n\n## Test Cases\n\n### Test 1: Simple Round-Trip\n```python\ndef test_simple_roundtrip():\n\t# Extract all text\n\textract_simple_text()\n\t\n\t# Re-insert unchanged\n\tinsert_simple_text()\n\t\n\t# Compare ROM bytes\n\tassert original_rom == modified_rom\n```\n\n### Test 2: Dialog 0x59 (Known Good)\n```python\ndef test_dialog_59():\n\t# Known readable dialog:\n\t# \"For years Mac's been studying a Prophecy,\n\t#  On his way back from doing some research.\"\n\t\n\toriginal = extract_dialog(0x59)\n\tmodified = original  # No changes\n\tinsert_dialog(0x59, modified)\n\t\n\tassert extract_dialog(0x59) == original\n```\n\n### Test 3: Dictionary Compression\n```python\ndef test_dictionary_compression():\n\ttext = \"the the the\"  # Should use dict entry 0x41\n\tencoded = encode_text(text)\n\t\n\t# Should be shorter than raw encoding\n\tassert len(encoded) < len(text)\n\t\n\t# Should decode correctly\n\tassert decode_bytes(encoded) == text\n```\n\n### Test 4: Size Validation\n```python\ndef test_size_validation():\n\t# Dialog that's too large\n\toversized = \"A\" * 1000\n\t\n\t# Should raise warning/error\n\twith pytest.raises(ValueError):\n\t\tinsert_dialog(0x00, oversized)\n```\n\n## Success Criteria\n\n- ‚úÖ All 595 simple text entries pass round-trip\n- ‚úÖ All 117 dialogs pass round-trip\n- ‚úÖ Modified text re-inserts correctly\n- ‚úÖ Dictionary compression validated\n- ‚úÖ Size constraints enforced\n- ‚úÖ All test cases pass\n- ‚úÖ Integrated into test suite\n- ‚úÖ Documentation updated\n\n## Resources\n\n- **Re-insertion Tool:** `tools/extraction/import_complex_text.py`\n- **Extraction Tool:** `tools/extraction/extract_dictionary.py`\n- **Validation Command:** `python tools/ffmq_text.py validate`\n- **Test Suite:** `tools/testing/run_all_tests.py`\n\n## Labels\n\n- `testing`\n- `text-system`\n- `high-priority`\n- `validation`\n\n## Milestone\n\nText System v1.0 - Complete Translation Support",
		"labels": ["testing", "text-system", "high-priority", "validation"]
	},
	{
		"title": "üöÄ Add Batch Dialog Export/Import Functionality",
		"body": "## Overview\n\nAdd batch operations to export all 117 dialogs to individual files and import them back for easier translation workflows.\n\n## Current Status\n\n- ‚úÖ Single-file export works (all dialogs in one file)\n- ‚ö†Ô∏è No individual dialog export\n- ‚ö†Ô∏è No batch import from directory\n\n## User Story\n\n**As a translator, I want to:**\n- Export each dialog to its own file (`dialog_000.txt`, `dialog_001.txt`, etc.)\n- Translate dialogs in isolation\n- Import all translated dialogs at once\n- Track translation progress (which dialogs done)\n\n## Implementation Plan\n\n### Phase 1: Batch Export\n```bash\npython tools/ffmq_text.py batch-export-dialogs --output data/dialogs/\n```\n\n**Output Structure:**\n```\ndata/dialogs/\n\t‚îú‚îÄ‚îÄ dialog_000.txt\n\t‚îú‚îÄ‚îÄ dialog_001.txt\n\t‚îú‚îÄ‚îÄ dialog_002.txt\n\t...\n\t‚îú‚îÄ‚îÄ dialog_116.txt\n\t‚îî‚îÄ‚îÄ manifest.json  # Metadata: original size, tags used, etc.\n```\n\n**File Format:**\n```\n# Dialog 0x00 - Opening\n# Original Size: 42 bytes\n# Max Size: 42 bytes (no expansion without relocation)\n# Tags: [NAME], {newline}, [TEXTBOX_BELOW], [CRYSTAL], [END]\n\n[NAME], wake up!\nIt's time to save the world!{newline}\n[TEXTBOX_BELOW]The [CRYSTAL] needs you![END]\n```\n\n### Phase 2: Batch Import\n```bash\npython tools/ffmq_text.py batch-import-dialogs --input data/dialogs/ --output translated.sfc\n```\n\n**Features:**\n- Import all `.txt` files in directory\n- Validate each dialog before writing\n- Show progress bar (1/117, 2/117, ...)\n- Generate report of successes/failures\n- Skip unchanged dialogs (optimization)\n\n### Phase 3: Translation Progress Tracking\n```bash\npython tools/ffmq_text.py translation-status --input data/dialogs/\n```\n\n**Output:**\n```\nTranslation Progress Report\n===========================\nTotal Dialogs:        117\nTranslated:            42 (35.9%)\nIn Progress:           15 (12.8%)\nNot Started:           60 (51.3%)\n\nStatus by Section:\n  Opening:             5/5   (100%) ‚úÖ\n  Hill of Destiny:     8/12  (66.7%) üîÑ\n  Foresta:             3/15  (20.0%) ‚ö†Ô∏è\n  ...\n```\n\n### Phase 4: Validation & Safety\n- [ ] Check dialog size before writing\n- [ ] Warn if dialog exceeds original size\n- [ ] Verify all control codes valid\n- [ ] Check character table coverage\n- [ ] Backup original ROM before import\n- [ ] Generate diff report after import\n\n### Phase 5: Advanced Features\n- [ ] Export to CSV for spreadsheet translation\n- [ ] Import from CSV\n- [ ] Export to PO files (gettext format)\n- [ ] Integration with translation tools (OmegaT, etc.)\n\n## File Structure\n\n```python\n# manifest.json\n{\n\t\"format_version\": \"1.0\",\n\t\"export_date\": \"2025-01-24T12:00:00Z\",\n\t\"rom_checksum\": \"ABC123\",\n\t\"dialogs\": [\n\t\t{\n\t\t\t\"id\": 0,\n\t\t\t\"file\": \"dialog_000.txt\",\n\t\t\t\"original_size\": 42,\n\t\t\t\"max_size\": 42,\n\t\t\t\"section\": \"Opening\",\n\t\t\t\"speaker\": \"????\",\n\t\t\t\"tags_used\": [\"NAME\", \"newline\", \"TEXTBOX_BELOW\", \"CRYSTAL\", \"END\"],\n\t\t\t\"translated\": false\n\t\t},\n\t\t...\n\t]\n}\n```\n\n## Tools to Create\n\n1. `tools/extraction/batch_export_dialogs.py`\n2. `tools/import/batch_import_dialogs.py`\n3. `tools/tracking/translation_progress.py`\n4. Integration into `tools/ffmq_text.py`\n\n## Success Criteria\n\n- ‚úÖ Export all 117 dialogs to individual files\n- ‚úÖ Import all dialogs from directory\n- ‚úÖ Progress tracking works\n- ‚úÖ Size validation prevents overflow\n- ‚úÖ Manifest tracks metadata\n- ‚úÖ CSV export/import works\n- ‚úÖ Documentation updated\n\n## Benefits\n\n- **Easier Collaboration:** Multiple translators work on different dialogs\n- **Version Control:** Git tracks per-dialog changes\n- **Progress Tracking:** See exactly what's done\n- **Safety:** Validate before writing\n- **Flexibility:** Multiple export formats\n\n## Labels\n\n- `enhancement`\n- `text-system`\n- `translation`\n- `medium-priority`\n\n## Milestone\n\nText System v1.1 - Advanced Translation Features",
		"labels": ["enhancement", "text-system", "translation", "medium-priority"]
	},
	{
		"title": "üé® Create Dialog Editor GUI",
		"body": "## Overview\n\nCreate a visual dialog editor GUI similar to the enemy editor, allowing intuitive dialog editing with real-time preview and validation.\n\n## Inspiration\n\nBased on the successful `enemy_editor_gui.py` pattern:\n- Visual browsing of all dialogs\n- Real-time editing with validation\n- Undo/redo support\n- Search and filtering\n- Built-in testing\n\n## Features\n\n### Core Functionality\n- [ ] **Dialog Browser**\n  - List view of all 117 dialogs\n  - Search by text content\n  - Filter by section (Opening, Foresta, etc.)\n  - Show preview of first line\n\n- [ ] **Visual Editor**\n  - Multi-line text edit area\n  - Syntax highlighting for control codes\n  - Character counter (current size / max size)\n  - Real-time validation (size, characters, codes)\n\n- [ ] **Control Code Toolbar**\n  - Buttons for common codes: [END], {newline}, [WAIT], etc.\n  - Click to insert at cursor\n  - Tooltip showing code function\n\n- [ ] **Character Table Helper**\n  - Show available special characters\n  - Click to insert accented chars (√©, √®, √†, √º, √∂, √§)\n  - Show unknown chars (not yet in table)\n\n- [ ] **Dictionary Preview**\n  - Highlight text that will use dictionary compression\n  - Show space savings estimate\n  - Preview compressed bytes\n\n- [ ] **Size Validation**\n  - Visual indicator: green (fits), yellow (warning), red (too large)\n  - Show bytes used vs bytes available\n  - Warning if expansion needed\n\n### Advanced Features\n- [ ] **Undo/Redo** (Ctrl+Z / Ctrl+Y)\n- [ ] **Live Preview** (render dialog in SNES font)\n- [ ] **Export** to JSON, CSV, or individual files\n- [ ] **Import** from external files\n- [ ] **Translation Mode** (side-by-side original + translation)\n- [ ] **Find & Replace** across all dialogs\n\n### Integration\n- [ ] **ROM Loading** (drag-and-drop)\n- [ ] **Save to ROM** (backup + write)\n- [ ] **Test in Emulator** (launch Mesen with modified ROM)\n- [ ] **Compare with Original** (show differences)\n\n## UI Mockup\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ FFMQ Dialog Editor                                    [_][‚ñ°][X] ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ File  Edit  View  Tools  Help                              ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ Dialogs     ‚îÇ Dialog 0x00 - Opening                         ‚îÇ\n‚îÇ             ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ [Search...] ‚îÇ Size: 42 / 42 bytes [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà] 100%  ‚îÇ\n‚îÇ             ‚îÇ                                               ‚îÇ\n‚îÇ ‚úì 000: [...] ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ\n‚îÇ ‚úì 001: [...] ‚îÇ ‚îÇ[NAME], wake up!                         ‚îÇ ‚îÇ\n‚îÇ   002: [...] ‚îÇ ‚îÇIt's time to save the world!{newline}    ‚îÇ ‚îÇ\n‚îÇ   003: [...] ‚îÇ ‚îÇ[TEXTBOX_BELOW]The [CRYSTAL] needs you! ‚îÇ ‚îÇ\n‚îÇ   ...       ‚îÇ ‚îÇ[END]                                    ‚îÇ ‚îÇ\n‚îÇ             ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ\n‚îÇ Filter:     ‚îÇ                                               ‚îÇ\n‚îÇ [ ] Opening ‚îÇ Controls: [[END]] [{newline}] [[WAIT]]        ‚îÇ\n‚îÇ [ ] Foresta ‚îÇ           [[NAME]] [[ITEM]] [[CRYSTAL]]       ‚îÇ\n‚îÇ [ ] ...     ‚îÇ                                               ‚îÇ\n‚îÇ             ‚îÇ Dictionary Preview:                           ‚îÇ\n‚îÇ Status:     ‚îÇ \"the\" ‚Üí 0x41 (saves 2 bytes)                  ‚îÇ\n‚îÇ 42/117 ‚úì   ‚îÇ                                               ‚îÇ\n‚îÇ             ‚îÇ [Save] [Export] [Test in Emulator]           ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n## Implementation Plan\n\n### Phase 1: Core GUI (Week 1)\n- [ ] Create `tools/dialog_editor_gui.py`\n- [ ] Dialog list view (Tkinter Listbox)\n- [ ] Text edit area (Tkinter Text widget)\n- [ ] Load ROM functionality\n- [ ] Save ROM functionality\n\n### Phase 2: Validation (Week 2)\n- [ ] Size validation (real-time)\n- [ ] Character validation (check table)\n- [ ] Control code validation (valid tags)\n- [ ] Visual indicators (green/yellow/red)\n\n### Phase 3: Control Code Toolbar (Week 3)\n- [ ] Button panel for common codes\n- [ ] Insert at cursor position\n- [ ] Tooltips for each button\n- [ ] Keyboard shortcuts\n\n### Phase 4: Dictionary Integration (Week 4)\n- [ ] Highlight dictionary-compressed text\n- [ ] Show space savings estimate\n- [ ] Preview compressed bytes\n\n### Phase 5: Advanced Features (Week 5)\n- [ ] Undo/redo implementation\n- [ ] Find & replace\n- [ ] Export/import functionality\n- [ ] Translation mode (side-by-side)\n\n### Phase 6: Polish & Testing (Week 6)\n- [ ] Icon design\n- [ ] Launcher scripts (dialog_editor.bat/.sh)\n- [ ] Comprehensive testing\n- [ ] User documentation\n- [ ] Tutorial video\n\n## Technical Requirements\n\n- **Python 3.7+**\n- **Tkinter** (built-in GUI library)\n- **Pillow** (for SNES font rendering)\n- **pytest** (testing)\n\n## Dependencies\n\n```python\nimport tkinter as tk\nfrom tkinter import ttk, filedialog, messagebox\nfrom tools.extraction.extract_dictionary import extract_dialogs\nfrom tools.extraction.import_complex_text import insert_dialogs_into_rom\nfrom tools.extraction.simple_table import SimpleTable\n```\n\n## Success Criteria\n\n- ‚úÖ GUI launches without errors\n- ‚úÖ All 117 dialogs browsable\n- ‚úÖ Real-time editing works\n- ‚úÖ Size validation prevents overflow\n- ‚úÖ Control code toolbar functional\n- ‚úÖ Dictionary preview shows savings\n- ‚úÖ Undo/redo works\n- ‚úÖ Export/import works\n- ‚úÖ Saves to ROM correctly\n- ‚úÖ Documentation complete\n\n## Future Enhancements\n\n- **SNES Font Rendering** (show exact in-game appearance)\n- **Sprite Integration** (show character portraits)\n- **Music Playback** (hear dialog music)\n- **Textbox Positioning** (visual preview of box location)\n- **Multi-ROM Support** (compare translations)\n\n## Labels\n\n- `enhancement`\n- `gui`\n- `text-system`\n- `medium-priority`\n\n## Milestone\n\nText System v2.0 - Visual Editing Tools",
		"labels": ["enhancement", "gui", "text-system", "medium-priority"]
	},
	{
		"title": "üì¶ Add ROM Expansion Support for Larger Dialogs",
		"body": "## Overview\n\nImplement ROM data relocation to allow dialogs larger than their original size, enabling expanded translations and additional content.\n\n## Problem\n\nCurrently, dialogs cannot exceed their original size without overwriting adjacent data. This limits translation to same-size or smaller text.\n\n## Current Limitations\n\n```\nDialog 0x00: Original size 42 bytes, Max size 42 bytes\nDialog 0x01: Original size 68 bytes, Max size 68 bytes\n...\n```\n\n**Cannot expand dialogs without:**\n1. Relocating dialog data block\n2. Updating pointer table\n3. Ensuring sufficient free space\n\n## Implementation Plan\n\n### Phase 1: Free Space Analysis\n- [ ] Scan ROM for free space (0xFF-filled regions)\n- [ ] Identify safe relocation regions\n- [ ] Calculate total available expansion space\n- [ ] Document free space map\n\n### Phase 2: Pointer Table Analysis\n- [ ] Locate dialog pointer table ($03:B835)\n- [ ] Document pointer format (16-bit offsets)\n- [ ] Verify pointer calculation logic\n- [ ] Test pointer updates\n\n### Phase 3: Data Relocation Logic\n```python\ndef relocate_dialog_block(new_location, new_size):\n\t# 1. Find free space in ROM\n\tfree_space = find_free_space(new_size)\n\t\n\t# 2. Copy dialog data to new location\n\tcopy_data(old_location, new_location, size)\n\t\n\t# 3. Update pointer table\n\tupdate_pointers(new_location)\n\t\n\t# 4. Clear old space (fill with 0xFF)\n\tclear_old_space(old_location, size)\n\t\n\t# 5. Verify integrity\n\tvalidate_relocation()\n```\n\n### Phase 4: Safety & Validation\n- [ ] **Backup ROM** before any modification\n- [ ] **Verify checksums** after relocation\n- [ ] **Test in emulator** to ensure no crashes\n- [ ] **Validate all pointers** updated correctly\n- [ ] **Check for overlaps** (no data corruption)\n\n### Phase 5: User Interface\n```bash\n# Expand dialog data block by 50%\npython tools/ffmq_text.py expand-dialogs --size 150%\n\n# Relocate to specific address\npython tools/ffmq_text.py relocate-dialogs --address 0x3F0000\n\n# Show free space map\npython tools/ffmq_text.py analyze-free-space\n```\n\n### Phase 6: Advanced Features\n- [ ] **Auto-expansion** (detect when dialog too large, auto-relocate)\n- [ ] **Smart packing** (reorganize dialogs for optimal space)\n- [ ] **Compression improvements** (enhance dictionary to save more space)\n\n## Technical Details\n\n### Current Dialog Layout\n```\nBank $03:\n  $A000 - $B834: Dialog data (~6KB)\n  $B835 - $B8XX: Pointer table (117 * 2 = 234 bytes)\n  $BA35 - $BAXX: Dictionary (80 entries, ~200 bytes)\n```\n\n### Relocation Strategy\n\n**Option 1: Expand in Place**\n- Find free space after current block\n- Expand into free space\n- Update pointers\n- **Pros:** Simple, minimal changes\n- **Cons:** Limited expansion\n\n**Option 2: Move to New Location**\n- Find large free space region\n- Copy entire dialog block\n- Update all pointers\n- **Pros:** Maximum expansion\n- **Cons:** More complex, higher risk\n\n**Option 3: Hybrid (Per-Dialog Relocation)**\n- Keep most dialogs in original location\n- Move only oversized dialogs to free space\n- Update pointers for moved dialogs only\n- **Pros:** Minimal risk, flexible\n- **Cons:** More complex pointer management\n\n### Free Space Locations (Initial Survey)\n```\n$00:F000 - $00:FFFF: 4KB (potential)\n$03:F000 - $03:FFFF: 4KB (likely safe)\n$07:E000 - $07:FFFF: 8KB (needs verification)\n...\n```\n\n## Risks & Mitigation\n\n### Risk 1: Pointer Corruption\n- **Mitigation:** Validate all pointers before/after\n- **Testing:** Extract all dialogs, verify readable\n\n### Risk 2: Overwriting Code/Data\n- **Mitigation:** Comprehensive free space analysis\n- **Testing:** Full ROM integrity check\n\n### Risk 3: Game Crashes\n- **Mitigation:** Emulator testing before real hardware\n- **Testing:** Play through all dialog-heavy sections\n\n### Risk 4: Save Data Corruption\n- **Mitigation:** Avoid SRAM regions\n- **Testing:** Save/load testing\n\n## Tools to Create\n\n1. `tools/rom-operations/analyze_free_space.py`\n2. `tools/rom-operations/relocate_dialog_data.py`\n3. `tools/rom-operations/validate_relocation.py`\n4. `tools/rom-operations/expand_dialog_block.py`\n\n## Success Criteria\n\n- ‚úÖ Free space map generated and verified\n- ‚úÖ Dialog block successfully relocated\n- ‚úÖ All pointers updated correctly\n- ‚úÖ All 117 dialogs still readable\n- ‚úÖ Game runs without crashes\n- ‚úÖ Expanded dialogs work in-game\n- ‚úÖ Backup/restore works\n- ‚úÖ Documentation complete\n\n## Future Enhancements\n\n- **Bank switching** for unlimited dialog space\n- **Dynamic loading** (load dialogs from external file)\n- **Compression improvements** (better dictionary, new compression format)\n\n## Labels\n\n- `enhancement`\n- `text-system`\n- `low-priority`\n- `advanced`\n\n## Milestone\n\nText System v3.0 - Unlimited Dialog Expansion\n\n## Notes\n\n‚ö†Ô∏è **This is an advanced feature requiring extensive ROM knowledge and testing. Recommend implementing only after:**\n1. Round-trip validation complete\n2. Control code documentation complete\n3. Dialog editor GUI complete\n4. Extensive testing with real hardware",
		"labels": ["enhancement", "text-system", "low-priority", "advanced"]
	}
]
